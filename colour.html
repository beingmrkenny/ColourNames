<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Hexxy McGee</title>
        <style media="screen">
            body {
                font-family: sans-serif;
                color: white;
            }
            body.mod-light-background {
                color: #444;
            }
        </style>
    </head>
    <body style="background-color: #444;">

        <input type="color" name="input" value="#444444"><br>
        <output name="hex">#444444</output><br>
        <output name="hsb">HSB(359.00ยบ, 0.00%, 27.00%)</output><br>
        <output name="name">Gray</output>

        <script type="text/javascript" src="func.js"></script>
        <script type="text/javascript" src="Color.js"></script>
        <script type="text/javascript" src="ColourNames.js"></script>

        <script type="text/javascript">

            var input = document.querySelector('[name="input"]');

            input.addEventListener('input', function (event) {
                let hex = this.value;
                let color = new Color(hex);
                let hueInt = parseInt(color.hue);
                let hueFloat = color.hue - hueInt;
                hueFloat = (hueFloat > 0) ? hueFloat : '.00';
                if (typeof hueFloat != 'string') {
                    hueFloat = hueFloat.toFixed(2);
                    hueFloat = hueFloat.toString();
                    hueFloat = hueFloat.replace('0.', '.');
                }
                hueInt = ("000" + hueInt).substr(-3,3);
                let hue = hueInt + hueFloat;
                let sat = parseFloat(color.saturation_hsb).toFixed(2);
        		let bri = parseFloat(color.brightness).toFixed(2);

                color.toHSB();
                document.querySelector('[name="hex"]').value = hex;
                document.querySelector('[name="hsb"]').value = `HSB(${hue}ยบ, ${sat}%, ${bri}%)`;
                document.body.style.backgroundColor = hex;
                document.body.classList.toggle('mod-light-background', color.isLight(hex));
            });

            window.addEventListener("input", debounceListener ( function (event) {
                let hex = event.target.value;
                let names = new ColourNames(hex);
                document.querySelector('[name="name"]').value = names.getHueName();
            }, 50), false);

        </script>

    </body>
</html>
